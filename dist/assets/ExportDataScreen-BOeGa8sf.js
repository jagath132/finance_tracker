import{j as t,p as y,z as a}from"./ui-9V2nKd88.js";import{f as b,r as j}from"./vendor-BLIq4JPC.js";import{B as E}from"./Button-fgWSp_I2.js";import{u as N}from"./useTransactions-BKq-WBsM.js";import{P as v}from"./papaparse.min-DsXab4K3.js";import{u as C}from"./useCategories-ITDpBBlg.js";import"./index-B5lVPReX.js";import"./supabase-GK0Ohaqy.js";import"./utils-CpJM9g8Q.js";const z=()=>{const d=b(),{transactions:n,loading:p}=N(),{categories:m}=C(),[x,i]=j.useState(!1),u=o=>{var e;return((e=m.find(c=>c.id===o))==null?void 0:e.name)||"N/A"},g=async()=>{if(i(!0),n.length===0){a.error("No transactions to export."),i(!1);return}const o=a.loading("Exporting as CSV...");try{const e=n.map(r=>({Date:new Date(r.transaction_date).toLocaleDateString(),Description:r.description,Category:u(r.category_id),Type:r.type,Amount:r.amount,Notes:r.notes||""})),c=`cointrail-export-${new Date().toISOString().split("T")[0]}.csv`,f=v.unparse(e),h=new Blob([f],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),l=URL.createObjectURL(h);s.setAttribute("href",l),s.setAttribute("download",c),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l),a.success("Export successful!",{id:o})}catch(e){a.error("An error occurred during export.",{id:o}),console.error("Export error:",e)}finally{i(!1)}};return t.jsxs("div",{className:"min-h-screen bg-dark-primary text-white p-4 sm:p-6",children:[t.jsxs("header",{className:"flex items-center justify-between mb-8",children:[t.jsx("button",{onClick:()=>d(-1),className:"p-2 rounded-full bg-dark-secondary",children:t.jsx(y,{size:24,className:"text-gray-400"})}),t.jsx("h1",{className:"text-xl font-bold",children:"Export Data"}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"bg-dark-secondary p-6 rounded-2xl text-center",children:[t.jsx("p",{className:"text-gray-400 mb-4",children:"Export all your transaction data into a single CSV file."}),t.jsx("div",{className:"mt-6",children:t.jsxs(E,{onClick:g,isLoading:x||p,children:["Export ",n.length," Transactions as CSV"]})})]})]})};export{z as default};
