import{j as e,d as j,S as u,e as N,m as i,T as f,f as k,a as v,A as T,g as w}from"./ui-Dy4X14_K.js";import{f as C,L as c,h as m}from"./vendor-gOpYt1fm.js";import{u as z,a as L}from"./index-CbbJHnKT.js";import{u as A}from"./useTransactions-9cdBbzWI.js";import{B as $}from"./Button-BdbUWFle.js";import{u as R}from"./useCategories-Cytt2SIa.js";import{T as S}from"./TransactionListItem-ChvY6lyL.js";import"./supabase-RyWy78zx.js";import"./ConfirmationModal-DmTpPKXL.js";const o=m.memo(({title:d,amount:n,change:a,icon:r,colorClass:s,isBalance:l=!1})=>e.jsxs(i.div,{className:"p-4 rounded-2xl flex flex-col justify-between bg-light-secondary dark:bg-dark-secondary",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary text-base",children:d}),r&&e.jsx("div",{className:`p-1.5 rounded-full bg-opacity-20 ${s?`bg-${s}`:""}`,children:m.cloneElement(r,{className:`text-${s}`,size:16})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:`text-2xl font-bold ${l?n>=0?"text-brand-green":"text-brand-red":"text-light-text dark:text-dark-text"}`,children:["â‚¹",new Intl.NumberFormat("en-IN").format(n)]}),a!=null&&a!==0&&e.jsxs("div",{className:"flex items-center text-xs text-light-text-secondary dark:text-dark-text-secondary mt-0.5",children:[a>0?e.jsx(T,{size:14,className:"text-brand-green"}):e.jsx(w,{size:14,className:"text-brand-red"}),e.jsxs("span",{className:`ml-1 ${a>0?"text-brand-green":"text-brand-red"}`,children:[Math.abs(a),"%"]})]})]})]})),V=()=>{const d=C(),{user:n,logout:a}=z(),{transactions:r,summary:s,loading:l,deleteTransaction:g}=A(),{categories:h,loading:y}=R(),{openModal:x}=L(),p=l||y;return e.jsxs("div",{className:"p-4 sm:p-6 bg-light-primary dark:bg-dark-primary min-h-screen",children:[e.jsxs("header",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Welcome back,"}),e.jsx("h1",{className:"text-2xl font-bold",children:n?.user_metadata?.full_name||"User"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{to:"/search",className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary",children:e.jsx(j,{size:20,className:"text-light-text-secondary dark:text-dark-text-secondary"})}),e.jsx(c,{to:"/settings",className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary",children:e.jsx(u,{size:24,className:"text-light-text-secondary dark:text-dark-text-secondary"})}),e.jsx("button",{onClick:a,className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary hover:bg-light-primary dark:hover:bg-dark-primary",children:e.jsx(N,{size:20,className:"text-light-text-secondary dark:text-dark-text-secondary"})})]})]}),e.jsxs("main",{children:[e.jsxs(i.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[e.jsx(o,{title:"Current Balance",amount:s.balance,isBalance:!0}),e.jsx(o,{title:"Total Income",amount:s.income,change:s.incomeChange,icon:e.jsx(f,{size:20}),colorClass:"brand-green"}),e.jsx(o,{title:"Total Expenses",amount:s.expenses,change:s.expenseChange,icon:e.jsx(k,{size:20}),colorClass:"brand-red"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Transactions"}),e.jsx(c,{to:"/transactions",className:"text-brand-green text-sm",children:"View All"})]}),p?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(v,{className:"animate-spin text-brand-green",size:32})}):r.length>0?e.jsx(i.div,{className:"space-y-2 sm:space-y-3",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:r.slice(0,5).map(t=>e.jsx(i.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},transition:{duration:.3},children:e.jsx(S,{transaction:t,category:h.find(b=>b.id===t.category_id)||null,onDelete:()=>g(t.id),onEdit:()=>x("editTransaction",t),onClick:()=>d(`/transactions/${t.id}`)})},t.id))}):e.jsxs("div",{className:"text-center py-10 bg-light-secondary dark:bg-dark-secondary rounded-xl",children:[e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"No transactions yet."}),e.jsx($,{onClick:()=>x("addTransaction"),className:"mt-4 max-w-xs mx-auto",children:"Add your first transaction"})]})]})]})]})};export{V as default};
