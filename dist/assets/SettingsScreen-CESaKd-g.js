import{j as e,U as y,s as t,t as f,D as k,u as v,f as N,v as w,w as z,x as C,z as r}from"./ui-9V2nKd88.js";import{f as D,r as T,L as n}from"./vendor-BLIq4JPC.js";import{u as R,b as A,s as o}from"./index-B5lVPReX.js";import{C as L}from"./ConfirmationModal-BQzURq6n.js";import{u as M}from"./useTransactions-BKq-WBsM.js";import{u as O}from"./useCategories-ITDpBBlg.js";import"./supabase-GK0Ohaqy.js";import"./Button-fgWSp_I2.js";const q=()=>{var l;const{user:a}=R(),c=D(),{theme:m,setTheme:x}=A(),{refetch:g}=M(),{refetch:h}=O(),[u,i]=T.useState(!1),j=async()=>{const{error:s}=await o.auth.signOut();s?r.error(s.message):(r.success("Logged out successfully"),c("/login"))},b=async()=>{const s=r.loading("Resetting data..."),{error:d}=await o.rpc("reset_user_data");d?r.error(`Failed to reset data: ${d.message}`,{id:s}):(await g(),await h(),r.success("All your data has been reset.",{id:s})),i(!1)},p={light:e.jsx(C,{size:20}),dark:e.jsx(z,{size:20}),system:e.jsx(w,{size:20})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen p-4 sm:p-6",children:[e.jsx("header",{className:"mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-light-text-secondary dark:text-dark-text-secondary uppercase tracking-wider mb-3",children:"Account"}),e.jsx("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg",children:e.jsxs(n,{to:"/profile",className:"flex items-center justify-between p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-gray-300 dark:bg-gray-700 rounded-full mr-4",children:e.jsx(y,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:(l=a==null?void 0:a.user_metadata)==null?void 0:l.full_name}),e.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:a==null?void 0:a.email})]})]}),e.jsx(t,{size:20,className:"text-gray-500"})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-light-text-secondary dark:text-dark-text-secondary uppercase tracking-wider mb-3",children:"Display"}),e.jsxs("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg p-4",children:[e.jsx("label",{className:"text-sm",children:"Theme"}),e.jsx("div",{className:"flex justify-around items-center bg-light-primary dark:bg-dark-primary p-1 rounded-lg mt-2",children:["light","dark","system"].map(s=>e.jsxs("button",{onClick:()=>x(s),className:`w-full p-2 rounded-md flex justify-center items-center gap-2 capitalize text-sm transition-colors ${m===s?"bg-brand-green text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[p[s]," ",s]},s))})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-light-text-secondary dark:text-dark-text-secondary uppercase tracking-wider mb-3",children:"Data Management"}),e.jsxs("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg divide-y divide-light-border dark:divide-dark-border",children:[e.jsxs(n,{to:"/import",className:"flex items-center justify-between p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{size:20,className:"mr-4"}),e.jsx("span",{children:"Import Transactions"})]}),e.jsx(t,{size:20,className:"text-gray-500"})]}),e.jsxs(n,{to:"/export",className:"flex items-center justify-between p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{size:20,className:"mr-4"}),e.jsx("span",{children:"Export Data"})]}),e.jsx(t,{size:20,className:"text-gray-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-red-500 uppercase tracking-wider mb-3",children:"Danger Zone"}),e.jsx("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg",children:e.jsxs("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-between p-4 hover:bg-red-900/20 transition-colors text-brand-red",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{size:20,className:"mr-4"}),e.jsx("span",{children:"Reset All Data"})]}),e.jsx(t,{size:20})]})})]}),e.jsx("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg",children:e.jsxs("button",{onClick:j,className:"w-full flex items-center p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors text-brand-red",children:[e.jsx(N,{size:20,className:"mr-4"}),e.jsx("span",{children:"Logout"})]})})]})]}),e.jsx(L,{isOpen:u,onClose:()=>i(!1),onConfirm:b,title:"Reset All Data",message:"Are you absolutely sure? This will permanently delete all your transactions and categories. This action cannot be undone."})]})};export{q as default};
