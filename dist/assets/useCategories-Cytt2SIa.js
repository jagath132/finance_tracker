import{r as o}from"./vendor-gOpYt1fm.js";import{u as f,s as c}from"./index-CbbJHnKT.js";import{z as s}from"./ui-Dy4X14_K.js";const h=()=>{const{user:a}=f(),[u,n]=o.useState([]),[g,i]=o.useState(!0),t=o.useCallback(async()=>{if(!a)return;i(!0);const{data:r,error:e}=await c.from("categories").select("*").eq("user_id",a.id).order("name",{ascending:!0});e?s.error(e.message):n(r||[]),i(!1)},[a]);return o.useEffect(()=>{t()},[t]),{categories:u,loading:g,addCategory:async r=>{if(!a)return;const{error:e}=await c.from("categories").insert({...r,user_id:a.id});e?s.error(e.message):(s.success("Category added!"),t())},updateCategory:async(r,e)=>{const{error:d}=await c.from("categories").update(e).eq("id",r);d?s.error(d.message):(s.success("Category updated!"),t())},deleteCategory:async r=>{const{error:e}=await c.from("categories").delete().eq("id",r);e?s.error(e.message):(s.success("Category deleted!"),t())},refetch:t}};export{h as u};
