import{j as e,m as r,V as f,M as b,W as k,p as j,z as o}from"./ui-_IaUIWm1.js";import{r as l,j as v,e as N,L as C}from"./vendor-CeoOk9QE.js";import{B as E}from"./Button-BYbGGxhE.js";import{u as w}from"./index-Da4dX3Ws.js";const R={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},W=()=>{const{resendConfirmationEmail:g,emailConfirmed:a,user:c}=w(),[m,x]=l.useState(!1),[n,y]=l.useState(""),[u]=v(),h=N(),s=u.get("confirmed")==="true",d=u.get("error");l.useEffect(()=>{if(a&&c||s){const t=setTimeout(()=>{h("/dashboard")},3e3);return()=>clearTimeout(t)}},[a,c,s,h]);const p=async()=>{if(!n){o.error("Please enter your email address");return}x(!0);try{const t=await g(n);t.success?o.success("Confirmation email sent! Please check your inbox."):o.error(t.error||"Failed to resend email")}catch{o.error("An unexpected error occurred")}x(!1)};return e.jsx("div",{className:"min-h-screen bg-light-primary dark:bg-dark-primary flex flex-col justify-center items-center p-4 sm:p-6",children:e.jsxs(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(r.div,{className:"bg-light-secondary dark:bg-dark-secondary p-4 rounded-full inline-block mb-4",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,delay:.2},children:a?e.jsx(f,{className:"text-green-500",size:40,strokeWidth:1.5}):e.jsx(b,{className:"text-brand-green",size:40,strokeWidth:1.5})}),e.jsx(r.h1,{className:"text-3xl font-bold text-light-text dark:text-dark-text",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:a||s?"Email Confirmed!":"Check Your Email"}),e.jsx(r.p,{className:"text-light-text-secondary dark:text-dark-text-secondary mt-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:a||s?"Your email has been successfully confirmed. Redirecting to dashboard...":"We've sent you a confirmation link to verify your account."})]}),e.jsxs(r.div,{className:"bg-light-secondary dark:bg-dark-secondary p-6 sm:p-8 rounded-2xl shadow-lg",variants:R,initial:"hidden",animate:"visible",children:[!(a||s)&&!d&&e.jsxs(e.Fragment,{children:[e.jsx(r.div,{variants:i,className:"text-center mb-6",children:e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Click the link in the email to complete your registration and start using Cointrail."})}),e.jsxs(r.div,{variants:i,className:"mb-6",children:[e.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-4",children:"Didn't receive the email? Enter your email address below to resend it."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"email",value:n,onChange:t=>y(t.target.value),placeholder:"Enter your email address",className:"w-full px-4 py-3 bg-light-primary dark:bg-dark-primary border border-light-border dark:border-dark-border rounded-lg text-light-text dark:text-dark-text placeholder-light-text-secondary dark:placeholder-dark-text-secondary focus:outline-none focus:ring-2 focus:ring-brand-green"}),e.jsx(E,{onClick:p,isLoading:m,className:"w-full",disabled:!n,children:m?e.jsxs(e.Fragment,{children:[e.jsx(k,{size:18,className:"animate-spin mr-2"}),"Sending..."]}):"Resend Confirmation Email"})]})]})]}),(a||s)&&!d&&e.jsx(r.div,{variants:i,className:"text-center mb-6",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-green-800 dark:text-green-200 font-medium",children:"üéâ Welcome to Cointrail!"}),e.jsx("p",{className:"text-green-600 dark:text-green-300 text-sm mt-1",children:"Your account has been successfully verified. You can now access all features."})]})}),d&&e.jsx(r.div,{variants:i,className:"text-center mb-6",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-800 dark:text-red-200 font-medium",children:"‚ö†Ô∏è Confirmation Failed"}),e.jsx("p",{className:"text-red-600 dark:text-red-300 text-sm mt-1",children:d==="confirmation_failed"?"There was an issue confirming your email. Please try again or contact support.":"An unexpected error occurred. Please try again."})]})}),e.jsx(r.div,{variants:i,className:"text-center",children:e.jsxs(C,{to:"/login",className:"inline-flex items-center text-brand-green hover:underline",children:[e.jsx(j,{size:16,className:"mr-2"}),"Back to Login"]})})]})]})})};export{W as default};
