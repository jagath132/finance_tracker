import{j as e,p as S,d as v,X as C,a as T}from"./ui-BvQeeWjB.js";import{r as t,e as w}from"./vendor-C2v42iKu.js";import{u as k}from"./index-z9EIHczJ.js";import{T as L}from"./TransactionListItem-BGPB0cxD.js";import{u as D}from"./useCategories-Cn9gT5pe.js";import{u as z}from"./useTransactions-ByQLS2az.js";import"./ConfirmationModal-B2cJ41LW.js";import"./Button-RIE1BFT8.js";function E(a,r){const[l,i]=t.useState(a);return t.useEffect(()=>{const n=setTimeout(()=>{i(a)},r);return()=>{clearTimeout(n)}},[a,r]),l}const U=()=>{const a=w(),{user:r}=k(),{categories:l}=D(),{transactions:i}=z(),[n,p]=t.useState(""),[d,u]=t.useState([]),[x,h]=t.useState(!1),[y,g]=t.useState(!1),m=E(n,300),f=t.useCallback(async s=>{if(!r||s.trim()===""){u([]),g(s.trim()!=="");return}h(!0),g(!0);const c=i.filter(o=>o.description.toLowerCase().includes(s.toLowerCase())).sort((o,N)=>new Date(N.transaction_date).getTime()-new Date(o.transaction_date).getTime());u(c),h(!1)},[r,i]);t.useEffect(()=>{f(m)},[m,f]);const j=s=>l.find(c=>c.id===s)?.name||"Uncategorized",b=async s=>{u(c=>c.filter(o=>o.id!==s))};return e.jsxs("div",{className:"min-h-screen bg-dark-primary text-white p-4 sm:p-6",children:[e.jsxs("header",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 rounded-full hover:bg-dark-secondary",children:e.jsx(S,{size:24,className:"text-gray-400"})}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(v,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by description...",value:n,onChange:s=>p(s.target.value),className:"w-full bg-dark-secondary border border-gray-700 rounded-lg p-3 pl-10 pr-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-green",autoFocus:!0}),n&&e.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:e.jsx(C,{size:20})})]})]}),e.jsx("main",{children:x?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(T,{className:"animate-spin text-brand-green",size:32})}):y?d.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:[d.length," result(s) found"]}),d.map(s=>e.jsx(L,{transaction:s,category:j(s.category_id),onDelete:()=>b(s.id),onEdit:()=>a(`/transactions/${s.id}`),onClick:()=>a(`/transactions/${s.id}`)},s.id))]}):e.jsx("div",{className:"text-center py-20",children:e.jsxs("p",{className:"text-gray-400",children:['No transactions found for "',m,'".']})}):e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-gray-400",children:"Start typing to search your transactions."})})})]})};export{U as default};
