import{j as e,i as T,m as C,P as D,a as I}from"./ui-9V2nKd88.js";import{r as a}from"./vendor-BLIq4JPC.js";import{u as z}from"./useCategories-ITDpBBlg.js";import{B as h}from"./Button-fgWSp_I2.js";import{C as P}from"./ConfirmationModal-BQzURq6n.js";import{I as F}from"./Input-CtsDJYbs.js";import"./index-B5lVPReX.js";import"./supabase-GK0Ohaqy.js";const L=({isOpen:l,onClose:m,onSave:o,category:s})=>{const[n,i]=a.useState(""),[x,r]=a.useState("expense"),[b,d]=a.useState(!1);a.useEffect(()=>{s&&(i(s.name),r(s.type))},[s]);const p=c=>{c.preventDefault(),s&&n.trim()&&(d(!0),o(s.id,n.trim(),x))};return e.jsx(T,{children:l&&s&&e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:m,children:e.jsxs(C.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-light-secondary dark:bg-dark-secondary rounded-2xl p-6 w-full max-w-sm",onClick:c=>c.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Category"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsx(F,{label:"Category Name",value:n,onChange:c=>i(c.target.value),required:!0}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"expense",checked:x==="expense",onChange:()=>r("expense"),className:"form-radio text-brand-red"})," Expense"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"income",checked:x==="income",onChange:()=>r("income"),className:"form-radio text-brand-green"})," Income"]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx(h,{type:"button",onClick:m,className:"bg-gray-500 hover:bg-gray-600",children:"Cancel"}),e.jsx(h,{type:"submit",isLoading:b,children:"Save Changes"})]})]})]})})})},$=({onAdd:l,onCancel:m})=>{const[o,s]=a.useState(""),[n,i]=a.useState("expense"),x=r=>{r.preventDefault(),o.trim()&&(l(o.trim(),n),s(""),i("expense"))};return e.jsxs("form",{onSubmit:x,className:"bg-light-secondary dark:bg-dark-secondary p-4 rounded-lg mt-4 space-y-4",children:[e.jsx("input",{className:"w-full rounded-lg p-3 bg-white dark:bg-dark-primary text-black dark:text-white border border-gray-300 focus:border-brand-green outline-none transition",placeholder:"Category Name",value:o,onChange:r=>s(r.target.value),required:!0}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"expense",checked:n==="expense",onChange:()=>i("expense")})," Expense"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"income",checked:n==="income",onChange:()=>i("income")})," Income"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{type:"submit",children:"Add"}),e.jsx(h,{type:"button",onClick:m,className:"bg-gray-500 hover:bg-gray-600",children:"Cancel"})]})]})},J=()=>{const[l,m]=a.useState("expense"),[o,s]=a.useState(!1),{categories:n,loading:i,addCategory:x,deleteCategory:r,updateCategory:b}=z(),[d,p]=a.useState(null),[c,y]=a.useState(null),[u,g]=a.useState(null),j=n.filter(t=>t.type===l),N=(t,f)=>{x({name:t,type:f}),s(!1)},k=()=>{d&&(r(d.id),p(null))},v=(t,f,A)=>{b(t,{name:f,type:A}),y(null)},w=t=>{g(t)},S=t=>{y(t),g(null)},E=t=>{p(t),g(null)};return e.jsxs("div",{className:"min-h-screen p-4 sm:p-6",children:[e.jsxs("header",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Categories"}),e.jsx("button",{type:"button",onClick:()=>s(!o),className:"bg-brand-green text-white p-2 rounded-full shadow-lg",children:e.jsx(D,{size:20})})]}),o&&e.jsx($,{onAdd:N,onCancel:()=>s(!1)}),e.jsxs("div",{className:"flex border-b border-light-border dark:border-dark-border mb-6 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>m("expense"),className:`py-2 px-4 text-sm font-medium ${l==="expense"?"text-brand-green border-b-2 border-brand-green":"text-light-text-secondary dark:text-dark-text-secondary"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>m("income"),className:`py-2 px-4 text-sm font-medium ${l==="income"?"text-brand-green border-b-2 border-brand-green":"text-light-text-secondary dark:text-dark-text-secondary"}`,children:"Income"})]}),i?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(I,{className:"animate-spin text-brand-green",size:32})}):j.length>0?e.jsx("div",{children:j.map(t=>e.jsx("div",{className:"flex items-center justify-between p-4 rounded-lg mb-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-primary overflow-hidden",onClick:()=>w(t),children:e.jsx("span",{className:"font-bold break-words truncate max-w-[180px] sm:max-w-xs",children:t.name})},t.id))}):e.jsx("div",{className:"text-center py-20",children:e.jsxs("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:["You have no ",l," categories."]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-dark-secondary rounded-xl p-6 w-80 shadow-lg",children:[e.jsx("h3",{className:"font-bold mb-4",children:u.name}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"flex-1 bg-blue-500 text-white rounded-lg py-2",onClick:()=>S(u),children:"Edit"}),e.jsx("button",{className:"flex-1 bg-red-500 text-white rounded-lg py-2",onClick:()=>E(u),children:"Delete"})]}),e.jsx("button",{className:"mt-4 w-full text-gray-500",onClick:()=>g(null),children:"Cancel"})]})}),e.jsx(P,{isOpen:!!d,onClose:()=>p(null),onConfirm:k,title:"Delete Category",message:`Are you sure you want to delete the "${d==null?void 0:d.name}" category? This might affect existing transactions.`}),e.jsx(L,{isOpen:!!c,onClose:()=>y(null),onSave:v,category:c})]})};export{J as default};
