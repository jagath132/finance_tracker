import{j as e,e as N,S as f,f as k,T as v,g as T,a as w,m as z,A as C,h as L}from"./ui-9V2nKd88.js";import{f as A,L as c,h as g}from"./vendor-BLIq4JPC.js";import{u as $,a as R}from"./index-B5lVPReX.js";import{u as S}from"./useTransactions-BKq-WBsM.js";import{B}from"./Button-fgWSp_I2.js";import{u as D}from"./useCategories-ITDpBBlg.js";import{T as E}from"./TransactionListItem-Bc1y0aYW.js";import"./supabase-GK0Ohaqy.js";import"./ConfirmationModal-BQzURq6n.js";const l=g.memo(({title:i,amount:r,change:t,icon:n,colorClass:s,isBalance:d=!1})=>e.jsxs(z.div,{className:"p-4 rounded-2xl flex flex-col justify-between bg-light-secondary dark:bg-dark-secondary",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary text-base",children:i}),n&&e.jsx("div",{className:`p-1.5 rounded-full bg-opacity-20 ${s?`bg-${s}`:""}`,children:g.cloneElement(n,{className:`text-${s}`,size:16})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:`text-2xl font-bold ${d?r>=0?"text-brand-green":"text-brand-red":"text-light-text dark:text-dark-text"}`,children:["â‚¹",new Intl.NumberFormat("en-IN").format(r)]}),t!=null&&t!==0&&e.jsxs("div",{className:"flex items-center text-xs text-light-text-secondary dark:text-dark-text-secondary mt-0.5",children:[t>0?e.jsx(C,{size:14,className:"text-brand-green"}):e.jsx(L,{size:14,className:"text-brand-red"}),e.jsxs("span",{className:`ml-1 ${t>0?"text-brand-green":"text-brand-red"}`,children:[Math.abs(t),"%"]})]})]})]})),G=()=>{var x;const i=A(),{user:r,logout:t}=$(),{transactions:n,summary:s,loading:d,deleteTransaction:h}=S(),{categories:y,loading:j}=D(),{openModal:o}=R(),u=a=>{var m;return((m=y.find(p=>p.id===a))==null?void 0:m.name)||"Uncategorized"},b=d||j;return e.jsxs("div",{className:"p-4 sm:p-6 bg-light-primary dark:bg-dark-primary min-h-screen",children:[e.jsxs("header",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Welcome back,"}),e.jsx("h1",{className:"text-2xl font-bold",children:((x=r==null?void 0:r.user_metadata)==null?void 0:x.full_name)||"User"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{to:"/search",className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary",children:e.jsx(N,{size:20,className:"text-light-text-secondary dark:text-dark-text-secondary"})}),e.jsx(c,{to:"/settings",className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary",children:e.jsx(f,{size:24,className:"text-light-text-secondary dark:text-dark-text-secondary"})}),e.jsx("button",{onClick:t,className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary hover:bg-light-primary dark:hover:bg-dark-primary",children:e.jsx(k,{size:20,className:"text-light-text-secondary dark:text-dark-text-secondary"})})]})]}),e.jsxs("main",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(l,{title:"Current Balance",amount:s.balance,isBalance:!0}),e.jsx(l,{title:"Total Income",amount:s.income,change:s.incomeChange,icon:e.jsx(v,{size:20}),colorClass:"brand-green"}),e.jsx(l,{title:"Total Expenses",amount:s.expenses,change:s.expenseChange,icon:e.jsx(T,{size:20}),colorClass:"brand-red"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Transactions"}),e.jsx(c,{to:"/transactions",className:"text-brand-green text-sm",children:"View All"})]}),b?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(w,{className:"animate-spin text-brand-green",size:32})}):n.length>0?e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map(a=>e.jsx(E,{transaction:a,categoryName:u(a.category_id),onDelete:()=>h(a.id),onEdit:()=>o("editTransaction",a),onClick:()=>i(`/transactions/${a.id}`)},a.id))}):e.jsxs("div",{className:"text-center py-10 bg-light-secondary dark:bg-dark-secondary rounded-xl",children:[e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"No transactions yet."}),e.jsx(B,{onClick:()=>o("addTransaction"),className:"mt-4 max-w-xs mx-auto",children:"Add your first transaction"})]})]})]})]})};export{G as default};
