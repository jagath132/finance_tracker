import{j as e,U as p,s as r,t as y,D as f,u as k,e as v,v as N,w,x as z,z as a}from"./ui-Dy4X14_K.js";import{f as C,r as D,L as i}from"./vendor-gOpYt1fm.js";import{u as T,b as R,s as d}from"./index-CbbJHnKT.js";import{C as A}from"./ConfirmationModal-DmTpPKXL.js";import{u as L}from"./useTransactions-9cdBbzWI.js";import{u as M}from"./useCategories-Cytt2SIa.js";import"./supabase-RyWy78zx.js";import"./Button-BdbUWFle.js";const Z=()=>{const{user:n}=T(),o=C(),{theme:c,setTheme:m}=R(),{refetch:x}=L(),{refetch:g}=M(),[h,t]=D.useState(!1),u=async()=>{const{error:s}=await d.auth.signOut();s?a.error(s.message):(a.success("Logged out successfully"),o("/login"))},j=async()=>{const s=a.loading("Resetting data..."),{error:l}=await d.rpc("reset_user_data");l?a.error(`Failed to reset data: ${l.message}`,{id:s}):(await x(),await g(),a.success("All your data has been reset.",{id:s})),t(!1)},b={light:e.jsx(z,{size:20}),dark:e.jsx(w,{size:20}),system:e.jsx(N,{size:20})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen p-4 sm:p-6",children:[e.jsx("header",{className:"mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-light-text-secondary dark:text-dark-text-secondary uppercase tracking-wider mb-3",children:"Account"}),e.jsx("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg",children:e.jsxs(i,{to:"/profile",className:"flex items-center justify-between p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-gray-300 dark:bg-gray-700 rounded-full mr-4",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:n?.user_metadata?.full_name}),e.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:n?.email})]})]}),e.jsx(r,{size:20,className:"text-gray-500"})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-light-text-secondary dark:text-dark-text-secondary uppercase tracking-wider mb-3",children:"Display"}),e.jsxs("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg p-4",children:[e.jsx("label",{className:"text-sm",children:"Theme"}),e.jsx("div",{className:"flex justify-around items-center bg-light-primary dark:bg-dark-primary p-1 rounded-lg mt-2",children:["light","dark","system"].map(s=>e.jsxs("button",{onClick:()=>m(s),className:`w-full p-2 rounded-md flex justify-center items-center gap-2 capitalize text-sm transition-colors ${c===s?"bg-brand-green text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[b[s]," ",s]},s))})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-light-text-secondary dark:text-dark-text-secondary uppercase tracking-wider mb-3",children:"Data Management"}),e.jsxs("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg divide-y divide-light-border dark:divide-dark-border",children:[e.jsxs(i,{to:"/import",className:"flex items-center justify-between p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{size:20,className:"mr-4"}),e.jsx("span",{children:"Import Transactions"})]}),e.jsx(r,{size:20,className:"text-gray-500"})]}),e.jsxs(i,{to:"/export",className:"flex items-center justify-between p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{size:20,className:"mr-4"}),e.jsx("span",{children:"Export Data"})]}),e.jsx(r,{size:20,className:"text-gray-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs font-semibold text-red-500 uppercase tracking-wider mb-3",children:"Danger Zone"}),e.jsx("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg",children:e.jsxs("button",{onClick:()=>t(!0),className:"w-full flex items-center justify-between p-4 hover:bg-red-900/20 transition-colors text-brand-red",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{size:20,className:"mr-4"}),e.jsx("span",{children:"Reset All Data"})]}),e.jsx(r,{size:20})]})})]}),e.jsx("div",{className:"bg-light-secondary dark:bg-dark-secondary rounded-lg",children:e.jsxs("button",{onClick:u,className:"w-full flex items-center p-4 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors text-brand-red",children:[e.jsx(v,{size:20,className:"mr-4"}),e.jsx("span",{children:"Logout"})]})})]})]}),e.jsx(A,{isOpen:h,onClose:()=>t(!1),onConfirm:j,title:"Reset All Data",message:"Are you absolutely sure? This will permanently delete all your transactions and categories. This action cannot be undone."})]})};export{Z as default};
