import{j as e,h as k,m as p,P as B,d as L,X as P,a as G,s as S,B as M,t as $,G as q}from"./ui-BvQeeWjB.js";import{r}from"./vendor-C2v42iKu.js";import{u as O}from"./useCategories-Cn9gT5pe.js";import{B as g}from"./Button-RIE1BFT8.js";import{C as R}from"./ConfirmationModal-B2cJ41LW.js";import{I as X}from"./Input-DcakV9XR.js";import"./index-z9EIHczJ.js";const Y=({isOpen:o,onClose:c,onSave:d,category:a})=>{const[s,n]=r.useState(""),[m,l]=r.useState("expense"),[b,y]=r.useState(!1);r.useEffect(()=>{a&&(n(a.name),l(a.type))},[a]);const f=i=>{i.preventDefault(),a&&s.trim()&&(y(!0),d(a.id,s.trim(),m))};return e.jsx(k,{children:o&&a&&e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:c,children:e.jsxs(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-light-secondary dark:bg-dark-secondary rounded-2xl p-6 w-full max-w-sm",onClick:i=>i.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Category"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx(X,{label:"Category Name",value:s,onChange:i=>n(i.target.value),required:!0}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"expense",checked:m==="expense",onChange:()=>l("expense"),className:"form-radio text-brand-red"})," Expense"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"income",checked:m==="income",onChange:()=>l("income"),className:"form-radio text-brand-green"})," Income"]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx(g,{type:"button",onClick:c,className:"bg-gray-500 hover:bg-gray-600",children:"Cancel"}),e.jsx(g,{type:"submit",isLoading:b,children:"Save Changes"})]})]})]})})})},h={Shopping:e.jsx(S,{className:"text-brand-green"}),Gifts:e.jsx(q,{className:"text-brand-green"}),Entertainment:e.jsx($,{className:"text-brand-green"}),Salary:e.jsx(M,{className:"text-brand-green"}),Default:e.jsx(S,{className:"text-brand-green"})},H=({onAdd:o,onCancel:c})=>{const[d,a]=r.useState(""),[s,n]=r.useState("expense"),m=l=>{l.preventDefault(),d.trim()&&(o(d.trim(),s),a(""),n("expense"))};return e.jsxs("form",{onSubmit:m,className:"bg-light-secondary dark:bg-dark-secondary p-4 rounded-lg mt-4 space-y-4",children:[e.jsx("input",{className:"w-full rounded-lg p-3 bg-white dark:bg-dark-primary text-black dark:text-white border border-gray-300 focus:border-brand-green outline-none transition",placeholder:"Category Name",value:d,onChange:l=>a(l.target.value),required:!0}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"expense",checked:s==="expense",onChange:()=>n("expense")})," Expense"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:"income",checked:s==="income",onChange:()=>n("income")})," Income"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{type:"submit",children:"Add"}),e.jsx(g,{type:"button",onClick:c,className:"bg-red-500 hover:bg-red-600 text-white",children:"Cancel"})]})]})},ee=()=>{const[o,c]=r.useState("expense"),[d,a]=r.useState(!1),[s,n]=r.useState(""),{categories:m,loading:l,addCategory:b,deleteCategory:y,updateCategory:f}=O(),[i,j]=r.useState(null),[v,C]=r.useState(null),[x,u]=r.useState(null),w=m.filter(t=>t.type===o).filter(t=>t.name.toLowerCase().includes(s.toLowerCase())),E=(t,N)=>{b({name:t,type:N}),a(!1)},D=()=>{i&&(y(i.id),j(null))},T=(t,N,I)=>{f(t,{name:N,type:I}),C(null)},A=t=>{u(t)},z=t=>{C(t),u(null)},F=t=>{j(t),u(null)};return e.jsxs("div",{className:"min-h-screen p-4 sm:p-6",children:[e.jsxs("header",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Categories"}),e.jsx("button",{type:"button",onClick:()=>a(!d),className:"bg-brand-green text-white p-2 rounded-full shadow-lg",children:e.jsx(B,{size:20})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:18}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:s,onChange:t=>n(t.target.value),className:"w-full pl-10 pr-10 py-3 bg-light-secondary dark:bg-dark-secondary rounded-lg border border-light-border dark:border-dark-border focus:border-brand-green focus:outline-none"}),s&&e.jsx("button",{onClick:()=>n(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:e.jsx(P,{size:18})})]})}),e.jsx(k,{children:d&&e.jsx(p.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:e.jsx(H,{onAdd:E,onCancel:()=>a(!1)})})}),e.jsxs("div",{className:"flex border-b border-light-border dark:border-dark-border mb-6 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>c("expense"),className:`py-2 px-4 text-sm font-medium ${o==="expense"?"text-brand-green border-b-2 border-brand-green":"text-light-text-secondary dark:text-dark-text-secondary"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>c("income"),className:`py-2 px-4 text-sm font-medium ${o==="income"?"text-brand-green border-b-2 border-brand-green":"text-light-text-secondary dark:text-dark-text-secondary"}`,children:"Income"})]}),l?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(G,{className:"animate-spin text-brand-green",size:32})}):w.length>0?e.jsx(k,{children:e.jsx("div",{children:w.map(t=>e.jsx(p.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"bg-white dark:bg-dark-secondary shadow-md hover:shadow-lg rounded-xl p-4 mb-4 cursor-pointer transform hover:scale-105 transition-all duration-200 flex items-center justify-between",onClick:()=>A(t),children:e.jsxs("div",{className:"flex items-center gap-3",children:[h[t.icon]||h.Default,e.jsx("span",{className:"font-bold break-words truncate max-w-[150px] sm:max-w-xs",children:t.name})]})},t.id))})}):s?e.jsxs("div",{className:"text-center py-20",children:[e.jsxs("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:['No results found for "',s,'"']}),e.jsx("button",{onClick:()=>n(""),className:"text-brand-green hover:underline",children:"Clear search"})]}):e.jsx("div",{className:"text-center py-20",children:e.jsxs("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:["You have no ",o," categories."]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-dark-secondary rounded-xl p-6 w-96 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h[x.icon]||h.Default,e.jsx("h3",{className:"font-bold break-words",children:x.name})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"flex-1 bg-blue-500 text-white rounded-lg py-2",onClick:()=>z(x),children:"Edit"}),e.jsx("button",{className:"flex-1 bg-red-500 text-white rounded-lg py-2",onClick:()=>F(x),children:"Delete"})]}),e.jsx("button",{className:"mt-4 w-full bg-gray-200 dark:bg-dark-primary text-red-500 hover:text-red-600 font-medium py-2 rounded-lg",onClick:()=>u(null),children:"Cancel"})]})}),e.jsx(R,{isOpen:!!i,onClose:()=>j(null),onConfirm:D,title:"Delete Category",message:`Are you sure you want to delete the "${i?.name}" category? This might affect existing transactions.`}),e.jsx(Y,{isOpen:!!v,onClose:()=>C(null),onSave:T,category:v})]})};export{ee as default};
