import{j as t,p as y,z as a}from"./ui-Dy4X14_K.js";import{f as b,r as j}from"./vendor-gOpYt1fm.js";import{B as E}from"./Button-BdbUWFle.js";import{u as N}from"./useTransactions-9cdBbzWI.js";import{P as v}from"./papaparse.min-smZJhByJ.js";import{u as C}from"./useCategories-Cytt2SIa.js";import"./index-CbbJHnKT.js";import"./supabase-RyWy78zx.js";import"./utils-Bk4gEjOa.js";const z=()=>{const l=b(),{transactions:n,loading:d}=N(),{categories:p}=C(),[m,i]=j.useState(!1),x=o=>p.find(r=>r.id===o)?.name||"N/A",u=async()=>{if(i(!0),n.length===0){a.error("No transactions to export."),i(!1);return}const o=a.loading("Exporting as CSV...");try{const r=n.map(e=>({Date:new Date(e.transaction_date).toLocaleDateString(),Description:e.description,Category:x(e.category_id),Type:e.type,Amount:e.amount,Notes:e.notes||""})),g=`cointrail-export-${new Date().toISOString().split("T")[0]}.csv`,f=v.unparse(r),h=new Blob([f],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),c=URL.createObjectURL(h);s.setAttribute("href",c),s.setAttribute("download",g),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(c),a.success("Export successful!",{id:o})}catch(r){a.error("An error occurred during export.",{id:o}),console.error("Export error:",r)}finally{i(!1)}};return t.jsxs("div",{className:"min-h-screen bg-dark-primary text-white p-4 sm:p-6",children:[t.jsxs("header",{className:"flex items-center justify-between mb-8",children:[t.jsx("button",{onClick:()=>l(-1),className:"p-2 rounded-full bg-dark-secondary",children:t.jsx(y,{size:24,className:"text-gray-400"})}),t.jsx("h1",{className:"text-xl font-bold",children:"Export Data"}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"bg-dark-secondary p-6 rounded-2xl text-center",children:[t.jsx("p",{className:"text-gray-400 mb-4",children:"Export all your transaction data into a single CSV file."}),t.jsx("div",{className:"mt-6",children:t.jsxs(E,{onClick:u,isLoading:m||d,children:["Export ",n.length," Transactions as CSV"]})})]})]})};export{z as default};
