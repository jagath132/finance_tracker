import{j as e,d as j,S as u,e as N,m as d,D as k,T as f,f as v,a as w,A as C,g as T}from"./ui-_IaUIWm1.js";import{e as z,L as c,h as m}from"./vendor-CeoOk9QE.js";import{u as L,a as A}from"./index-Da4dX3Ws.js";import{u as D}from"./useTransactions-DNRskSPt.js";import{B as S}from"./Button-BYbGGxhE.js";import{u as $}from"./useCategories-CRkEOc7O.js";import{T as R}from"./TransactionListItem-C6MIkaLP.js";import"./ConfirmationModal-Ldo8QTtN.js";const o=m.memo(({title:n,amount:i,change:a,icon:r,colorClass:s,isBalance:l=!1})=>e.jsxs(d.div,{className:"p-3 sm:p-4 rounded-2xl flex flex-col justify-between bg-light-secondary dark:bg-dark-secondary",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary text-sm sm:text-base",children:n}),r&&e.jsx("div",{className:`p-1.5 rounded-full bg-opacity-20 ${s?`bg-${s}`:""}`,children:m.cloneElement(r,{className:`text-${s}`,size:16})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:`text-2xl font-bold ${l?i>=0?"text-brand-green":"text-brand-red":"text-light-text dark:text-dark-text"}`,children:["â‚¹",new Intl.NumberFormat("en-IN").format(i)]}),a!=null&&a!==0&&e.jsxs("div",{className:"flex items-center text-xs text-light-text-secondary dark:text-dark-text-secondary mt-0.5",children:[a>0?e.jsx(C,{size:14,className:"text-brand-green"}):e.jsx(T,{size:14,className:"text-brand-red"}),e.jsxs("span",{className:`ml-1 ${a>0?"text-brand-green":"text-brand-red"}`,children:[Math.abs(a),"%"]})]})]})]})),V=()=>{const n=z(),{user:i,logout:a}=L(),{transactions:r,summary:s,loading:l,deleteTransaction:g}=D(),{categories:h,loading:y}=$(),{openModal:x}=A(),b=l||y;return e.jsxs("div",{className:"p-4 sm:p-6 bg-light-primary dark:bg-dark-primary min-h-screen",children:[e.jsxs("header",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Welcome back,"}),e.jsx("h1",{className:"text-2xl font-bold",children:i?.user_metadata?.full_name||"User"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{to:"/search",className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary",children:e.jsx(j,{size:20,className:"text-light-text-secondary dark:text-dark-text-secondary"})}),e.jsx(c,{to:"/settings",className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary",children:e.jsx(u,{size:24,className:"text-light-text-secondary dark:text-dark-text-secondary"})}),e.jsx("button",{onClick:async()=>{await a(),n("/login")},className:"p-2 rounded-full bg-light-secondary dark:bg-dark-secondary hover:bg-light-primary dark:hover:bg-dark-primary",children:e.jsx(N,{size:20,className:"text-light-text-secondary dark:text-dark-text-secondary"})})]})]}),e.jsxs("main",{children:[e.jsxs(d.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[e.jsx(o,{title:"Current Balance",amount:s.balance,isBalance:!0,icon:e.jsx(k,{size:20}),colorClass:"brand-green"}),e.jsx(o,{title:"Total Income",amount:s.income,change:s.incomeChange,icon:e.jsx(f,{size:20}),colorClass:"brand-green"}),e.jsx(o,{title:"Total Expenses",amount:s.expenses,change:s.expenseChange,icon:e.jsx(v,{size:20}),colorClass:"brand-red"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Transactions"}),e.jsx(c,{to:"/transactions",className:"text-brand-green text-sm",children:"View All"})]}),b?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(w,{className:"animate-spin text-brand-green",size:32})}):r.length>0?e.jsx(d.div,{className:"space-y-2 sm:space-y-3",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:r.slice(0,5).map(t=>e.jsx(d.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},transition:{duration:.3},children:e.jsx(R,{transaction:t,category:h.find(p=>p.id===t.category_id)||null,onDelete:()=>g(t.id),onEdit:()=>x("editTransaction",t),onClick:()=>n(`/transactions/${t.id}`)})},t.id))}):e.jsxs("div",{className:"text-center py-10 bg-light-secondary dark:bg-dark-secondary rounded-xl",children:[e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"No transactions yet."}),e.jsx(S,{onClick:()=>x("addTransaction"),className:"mt-4 max-w-xs mx-auto",children:"Add your first transaction"})]})]})]})]})};export{V as default};
