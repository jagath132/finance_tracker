import{j as t,p as b,z as o}from"./ui-CqB_xnuP.js";import{d as y,r as j}from"./vendor-UbVtIYU6.js";import{B as E}from"./Button-Bj4TVVN4.js";import{u as N}from"./useTransactions-CxoIO0TM.js";import{P as v}from"./papaparse.min-DAjTYYde.js";import{u as C}from"./useCategories-CE2nb58C.js";import"./index-BUU1lA4v.js";import"./utils-Bk4gEjOa.js";const U=()=>{const l=y(),{transactions:n,loading:d}=N(),{categories:p}=C(),[m,c]=j.useState(!1),x=a=>p.find(s=>s.id===a)?.name||"N/A",u=async()=>{if(c(!0),n.length===0){o.error("No transactions to export."),c(!1);return}const a=o.loading("Exporting as CSV...");try{const s=n.map(e=>({Date:new Date(e.transaction_date).toLocaleDateString(),Description:e.description,Category:x(e.category_id),Type:e.type,Amount:e.amount,Notes:e.notes||""})),g=`cointrail-export-${new Date().toISOString().split("T")[0]}.csv`,f=v.unparse(s),h=new Blob([f],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),i=URL.createObjectURL(h);r.setAttribute("href",i),r.setAttribute("download",g),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i),o.success("Export successful!",{id:a})}catch(s){o.error("An error occurred during export.",{id:a}),console.error("Export error:",s)}finally{c(!1)}};return t.jsxs("div",{className:"min-h-screen bg-dark-primary text-white p-4 sm:p-6 lg:p-8 pb-20",children:[t.jsxs("header",{className:"flex items-center justify-between mb-8",children:[t.jsx("button",{onClick:()=>l(-1),className:"p-2 rounded-full bg-dark-secondary",children:t.jsx(b,{size:24,className:"text-gray-400"})}),t.jsx("h1",{className:"text-xl font-bold",children:"Export Data"}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"bg-dark-secondary p-6 rounded-2xl text-center",children:[t.jsx("p",{className:"text-gray-400 mb-4",children:"Export all your transaction data into a single CSV file."}),t.jsx("div",{className:"mt-6",children:t.jsxs(E,{onClick:u,isLoading:m||d,children:["Export ",n.length," Transactions as CSV"]})})]})]})};export{U as default};
